<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #35424a;
            color: #ffffff;
            padding: 10px 0;
            text-align: center;
        }
        nav ul {
            list-style: none;
            padding: 0;
        }
        nav ul li {
            display: inline;
            margin: 0 15px;
        }
        nav ul li a {
            color: #ffffff;
            text-decoration: none;
        }
        footer {
            background-color: #35424a;
            color: #ffffff;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
        legend {
            font-size: 0.9em;
            color: lightgray;
            margin-top: 4px;
        }
    </style>
    <title>Snow shortcut generator</title>
    <header>
        <h1>Snow shortcut generator</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#search">Search</a></li>
                <li><a href="#config">Config</a></li>
            </ul>
        </nav>
    </header>
</head>
<body>
    <!-- Main content goes here -->
    <span id="search"></span>

    <div style="margin: 40px auto; max-width: 400px; background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);">
        <label for="my_search" style="display:block; margin-bottom:8px; font-weight:bold;">Query</label>
        <input type="text" id="my_search" name="my_search" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
        <legend>Input here the number of the element to query (example : SNSVCxxxxxxx)</legend>
    </div>

    <script>
    window.addEventListener('DOMContentLoaded', function() {
        document.getElementById('my_search').focus();
    });
    </script>

    <div style="margin: 40px auto; max-width: 400px; background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);">
        <label style="display:block; margin-bottom:8px; font-weight:bold;">Lien dynamique</label>
        <a id="dynamicLink" href="https://example.com/" target="_blank">[Unknown]</a>
        <legend>This link changes dynamically according to the value of the "Query" field above.</legend>
    </div>
    <script>
        document.getElementById('my_search').addEventListener('input', function() {
            value = this.value.trim().toUpperCase();
            link = document.getElementById('dynamicLink');
            strSnowId = value.toUpperCase().trim();
            strOrganization = document.getElementById('organization').value;
            baseUrl = `https://${strOrganization}.service-now.com/`;
            strUrl = baseUrl;
            
            if (strSnowId.startsWith("VIT")) {
                strUrl += 'nav_to.do?uri=%2Fsn_vul_vulnerable_item.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("SNSVC")) {
                strUrl += 'nav_to.do?uri=%2Fcmdb_ci_service_discovered.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("ENG")) {
                strUrl += 'nav_to.do?uri=%2Fsn_audit_engagement_list.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("RITM")) {
                strUrl += 'nav_to.do?uri=%2Fsc_req_item.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("TASK")) {
                strUrl += 'nav_to.do?uri=%2Ftask.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("INC")) {
                strUrl += 'nav_to.do?uri=%2Fincident.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("PROB")) {
                strUrl += 'nav_to.do?uri=%2Fproblem.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("CHG")) {
                strUrl += 'nav_to.do?uri=%2Fchange_request.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("CR")) {
                strUrl += 'nav_to.do?uri=%2Fchange_request.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("REQ")) {
                strUrl += 'nav_to.do?uri=%2Fsc_request.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("TASK")) {
                strUrl += 'nav_to.do?uri=%2Ftask.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("KB")) {
                strUrl += 'nav_to.do?uri=%2Fkb_knowledge.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("CAT")) {
                strUrl += 'nav_to.do?uri=%2Fcn_catalog_category.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("SCAT")) {
                strUrl += 'nav_to.do?uri=%2Fcn_catalog_category.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("CI")) {
                strUrl += 'nav_to.do?uri=%2Fcmdb_ci.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("CMDB")) {
                strUrl += 'nav_to.do?uri=%2Fcmdb_ci.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("ASSET")) {
                strUrl += 'nav_to.do?uri=%2Falm_asset.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else if (strSnowId.startsWith("ALM")) {
                strUrl += 'nav_to.do?uri=%2Falm_asset.do%3Fsysparm_query%3Dnumber%3D' + strSnowId;
            }
            else {
                strSnowId = 'Unknown'
            }

            link.href = strUrl;
            link.textContent = '[' + strSnowId + ']';
        });
    </script>

    <span id="config"></span>

    <div style="margin: 40px auto; max-width: 400px; background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);">
        <label for="organization" style="display:block; margin-bottom:8px; font-weight:bold;">Organization</label>
        <input type="text" id="organization" name="organization" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
        <legend>Organization corresponds to the organization subdomain of service-now.com 
            (example : "your_organization.service-now.com")</legend>
    </div>

    <script>
    window.addEventListener('DOMContentLoaded', function() {
        const params = new URLSearchParams(window.location.search);
        const orgValue = params.get('organization');
        if (orgValue !== null) {
            document.getElementById('organization').value = orgValue;
        }
        else {
            document.getElementById('organization').value = 'your_organization';
        }
    });
    </script>

    

    <footer>
        <p>Github : <a style="color: lightgray;" href="https://github.com/arnaudconrath/prjSnow">https://github.com/arnaudconrath/prjSnow</a></p>
    </footer>
</body>
</html>